{"version":3,"sources":["../src/getScale.js","../src/index.js","index.js","../node_modules/parcel-bundler/src/builtins/bundle-url.js","../node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["getScale","i","viewport","document","querySelector","scale","content","match","from","to","Promise","reject","Error","toPosition","getPosition","fromPosition","a","parseFloat","flyball","createDiv","inner","style","width","height","top","left","appendChild","body","targetPosition","clientHeight","prefixs","forEach","setProperty","prefix","resolve","addEventListener","removeChild","getBoundingClientRect","className","div","createElement","classList","add","getElementById","bundleURL","getBundleURLCached","getBundleURL","err","matches","stack","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","split","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","querySelectorAll","length","module"],"mappings":"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","file":"f7007d6311b20145074b86d0679d655d.map","sourcesContent":["export default function getScale () {\n  let i = 1\n  const viewport = document.querySelector('meta[name=\"viewport\"]')\n\n  if (viewport) {\n    const scale = viewport.content.match(/initial-scale=(\\d+\\.?\\d*)/)\n    scale && (i = scale[1])\n  }\n\n  return i\n}\n","import getScale from './getScale'\nimport './index.css'\n\nfunction getPosition (targetPosition) {\n  if (targetPosition.getBoundingClientRect) {\n    return targetPosition.getBoundingClientRect()\n  } else {\n    return targetPosition\n  }\n}\n\nfunction createDiv (className) {\n  const div = document.createElement('div')\n  div.classList.add(className)\n  return div\n}\n\nexport default function (from, to) {\n  if (!to || !from) {\n    return Promise.reject(new Error('need two params'))\n  }\n\n  const toPosition = getPosition(to)\n  const fromPosition = getPosition(from)\n\n  const a = 9 / parseFloat(getScale())\n\n  const flyball = createDiv('flyball')\n  const inner = createDiv('inner')\n\n  inner.style.width = 2 * a + 'px'\n  inner.style.height = 2 * a + 'px'\n\n  flyball.style.top = fromPosition.top + 'px'\n  flyball.style.left = fromPosition.left + 'px'\n  flyball.appendChild(inner)\n\n  document.body.appendChild(flyball)\n\n  const targetPosition = {\n    top: toPosition.top - fromPosition.top,\n    left: toPosition.left - fromPosition.left\n  }\n\n  // For hack\n  flyball.clientHeight\n\n  const prefixs = ['-webkit-', '-moz-', '-ms-', '-o-', '']\n\n  prefixs.forEach(prefix => {\n    flyball.style.setProperty(`${prefix}transform`, `translate3d(${targetPosition.left}px, 0, 0)`)\n    inner.style.setProperty(`${prefix}transform`, `translate3d(0 ,${targetPosition.top}px, 0)`)\n  })\n\n  return new Promise((resolve) => {\n    inner.addEventListener('transitionend', () => {\n      document.body.removeChild(flyball)\n      resolve(true)\n    })\n  })\n}\n","import flyball from '../src/index'\nimport './index.css'\n\nconst from = document.getElementById('from1')\nconst to = document.getElementById('to1')\n\ndocument.getElementById('btn').addEventListener('click', () => {\n  flyball(from, to)\n})\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}